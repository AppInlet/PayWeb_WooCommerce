{"version":3,"file":"../paygate_checkout.js","sources":["paygate_checkout.js"],"sourcesContent":["jQuery(function() {\n    jQuery.ajaxSetup({\n        complete: function(xhr, textStatus) {\n            var result = JSON.parse(xhr.responseText);\n            if (result.paygate_override) {\n                jQuery('.woocommerce-error').remove();\n                initPayPopup(result);\n                return false;\n            }\n            return;\n        }\n    });\n    jQuery(document).ajaxComplete(function() {\n        if (jQuery('body').hasClass('woocommerce-checkout') || jQuery('body').hasClass('woocommerce-cart')) {\n            jQuery('html, body').stop();\n        }\n    });\n});\n\nfunction initPayPopup(result) {\n    jQuery(\"body\").append(\"<div id='payPopup'></div>\");\n    jQuery(\"#payPopup\").append(\"<div id='payPopupContent'></div>\");\n    jQuery(\"#payPopupContent\").append(\"<form name='paygate_checkout' id='paygate_checkout' action='https://secure.paygate.co.za/payweb3/process.trans' method='post'><input type='hidden' name='PAY_REQUEST_ID' value='\" + result.PAY_REQUEST_ID + \"' size='200'><input type='hidden' name='CHECKSUM' value='\" + result.CHECKSUM + \"' size='200'></form><iframe id='payPopupFrame' name='myIframe'></iframe><script type='text/javascript'>document.getElementById('paygate_checkout').submit();</script>\");\n}\njQuery(document).on('submit', 'form#order_review', function(e) {\n    jQuery(\"#place_order\").attr(\"disabled\", \"disabled\");\n    var contine = true;\n    if (jQuery('#terms').length) {\n        if (!jQuery(\"#terms\").is(\":checked\") == true) {\n            contine = false;\n        }\n    }\n    if (contine && jQuery('#payment_method_paygate').length && jQuery(\"#payment_method_paygate\").is(\":checked\") == true) {\n        if (paygate_checkout_js.is_order_pay) {\n            e.preventDefault();\n            var result = JSON.parse(paygate_checkout_js.pay_now_form_data);\n            initPayPopup(result);\n        } else {\n            e.preventDefault();\n            jQuery.ajax({\n                'url': wc_add_to_cart_params.ajax_url,\n                'type': 'POST',\n                'dataType': 'json',\n                'data': {\n                    'action': 'order_pay_payment',\n                    'order_id': paygate_checkout_js.order_id\n                },\n                'async': false\n            }).complete(function(response) {\n                var ajaxResult = JSON.parse(response);\n                initPayPopup(ajaxResult);\n            });\n        }\n    }\n});\n"],"names":["initPayPopup","result","jQuery","append","PAY_REQUEST_ID","CHECKSUM","ajaxSetup","complete","xhr","textStatus","JSON","parse","responseText","paygate_override","remove","document","ajaxComplete","hasClass","stop","on","e","attr","contine","length","is","paygate_checkout_js","is_order_pay","preventDefault","pay_now_form_data","ajax","url","wc_add_to_cart_params","ajax_url","type","dataType","data","action","order_id","async","response"],"mappings":"AAmBA,SAASA,aAAaC,GAClBC,OAAO,QAAQC,OAAO,6BACtBD,OAAO,aAAaC,OAAO,oCAC3BD,OAAO,oBAAoBC,OAAO,mLAAqLF,EAAOG,eAAiB,4DAA8DH,EAAOI,SAAW,0KAtBnUH,OAAO,WACHA,OAAOI,UAAU,CACbC,SAAU,SAASC,EAAKC,GACpB,IAAIR,EAASS,KAAKC,MAAMH,EAAII,cAC5B,GAAIX,EAAOY,iBAGP,OAFAX,OAAO,sBAAsBY,SAC7Bd,aAAaC,IACN,KAKnBC,OAAOa,UAAUC,aAAa,YACtBd,OAAO,QAAQe,SAAS,yBAA2Bf,OAAO,QAAQe,SAAS,sBAC3Ef,OAAO,cAAcgB,WAUjChB,OAAOa,UAAUI,GAAG,SAAU,oBAAqB,SAASC,GACxDlB,OAAO,gBAAgBmB,KAAK,WAAY,YACxC,IAAIC,GAAU,EACVpB,OAAO,UAAUqB,QACuB,IAAnCrB,OAAO,UAAUsB,GAAG,cACrBF,GAAU,GAGdA,GAAWpB,OAAO,2BAA2BqB,QAA8D,GAApDrB,OAAO,2BAA2BsB,GAAG,cACxFC,oBAAoBC,cACpBN,EAAEO,iBAEF3B,aADaU,KAAKC,MAAMc,oBAAoBG,sBAG5CR,EAAEO,iBACFzB,OAAO2B,KAAK,CACRC,IAAOC,sBAAsBC,SAC7BC,KAAQ,OACRC,SAAY,OACZC,KAAQ,CACJC,OAAU,oBACVC,SAAYZ,oBAAoBY,UAEpCC,OAAS,IACV/B,SAAS,SAASgC,GAEjBvC,aADiBU,KAAKC,MAAM4B"}